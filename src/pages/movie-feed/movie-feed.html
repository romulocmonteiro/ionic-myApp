<!--
  Generated template for the MoviePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>TMDB Now Playing</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>

  <ion-refresher (ionRefresh)="doRefresh($event)">
      <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="Arraste para atualizar"
      pullMin="100"
      closeduration="1000"
      refreshingSpinner="bubbles"
      refreshingText="Pegue sua pipoca...">
    </ion-refresher-content>
  </ion-refresher>

  <!-- Insiro a diretiva ngFor para varrer toda a lista de filmes e popular os cards-->
  <ion-card *ngFor="let movie of list_movies">

    <ion-item>
      <h2 class="movie_title" (click)="goToPage('MovieDetailPage')">{{ movie.title }}</h2>
      <p class="movie_date">{{ movie.original_title }}</p>
      <p class="movie_date">{{ movie.release_date }}</p>
    </ion-item>

  <!-- Insiro a diretiva ngIf com ng-template para exibir a imagem apenas qdo for encontrada -->
  <div *ngIf="movie.backdrop_path; then validImage else notValidImage"></div>
        <!-- Aqui é necessário utilizar outra diretiva do Angular para permitir -->
        <!-- de variável dentro do src, utilizando a notaçãp [src] -->
        <!-- Com esta notação não deve ser usada a interpolação no formato {{ }} para variáveis -->
        <ng-template #validImage>
          <img [src]="tmdb_image_url + movie.backdrop_path" (click)="goToPage('MovieDetailPage')">
        </ng-template>
        <ng-template #notValidImage>
            <img src="../../assets/images/no-image.png" (click)="goToPage('MovieDetailPage')">
          </ng-template>

      </ion-card>

</ion-content>